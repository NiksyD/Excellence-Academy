@model MyWebApplication.Models.Student
@{
	ViewData["Title"] = "Add New Student - Excellence Academy";
}

<!-- Header Section -->
<section class="bg-primary text-white py-4" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-md-8">
				<h1 class="display-5 fw-bold mb-2">
					<i class="fas fa-user-plus me-3"></i>Add New Student
				</h1>
				<p class="lead mb-0">Register a new student to Excellence Academy</p>
			</div>
			<div class="col-md-4 text-md-end">
				<a asp-action="Index" class="btn btn-light rounded-pill px-4">
					<i class="fas fa-arrow-left me-2"></i>Back to Students
				</a>
			</div>
		</div>
	</div>
</section>

<!-- Main Content -->
<div class="container py-5">
	<div class="row justify-content-center">
		<div class="col-lg-8">
			<div class="card shadow-lg border-0">
				<div class="card-header bg-light py-4">
					<h4 class="mb-0 text-center">
						<i class="fas fa-graduation-cap text-primary me-2"></i>
						Student Registration Form
					</h4>
				</div>
				<div class="card-body p-5">
					<form method="post" asp-action="Create" id="studentForm">
						<div class="row g-4">
							<!-- Personal Information Section -->
							<div class="col-12">
								<h5 class="text-primary mb-3">
									<i class="fas fa-user me-2"></i>Personal Information
								</h5>
								<hr class="mb-4">
							</div>
							
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Firstname" class="form-control" placeholder="First Name" />
									<label asp-for="Firstname" class="form-label">
										<i class="fas fa-user me-2"></i>First Name
									</label>
									<span asp-validation-for="Firstname" class="text-danger small"></span>
								</div>
							</div>
							
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Lastname" class="form-control" placeholder="Last Name" />
									<label asp-for="Lastname" class="form-label">
										<i class="fas fa-user me-2"></i>Last Name
									</label>
									<span asp-validation-for="Lastname" class="text-danger small"></span>
								</div>
							</div>
							
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="Email" type="email" class="form-control" placeholder="Email Address" />
									<label asp-for="Email" class="form-label">
										<i class="fas fa-envelope me-2"></i>Email Address
									</label>
									<span asp-validation-for="Email" class="text-danger small"></span>
								</div>
							</div>
							
							<!-- Academic Information Section -->
							<div class="col-12 mt-4">
								<h5 class="text-primary mb-3">
									<i class="fas fa-book me-2"></i>Academic Information
								</h5>
								<hr class="mb-4">
							</div>
							
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<select asp-for="Course" class="form-select">
										<option value="">Select a Program</option>
										<option value="Science & Technology">Science & Technology</option>
										<option value="Arts & Humanities">Arts & Humanities</option>
										<option value="Business Studies">Business Studies</option>
										<option value="Engineering">Engineering</option>
										<option value="Medicine">Medicine</option>
										<option value="Computer Science">Computer Science</option>
									</select>
									<label asp-for="Course" class="form-label">
										<i class="fas fa-graduation-cap me-2"></i>Academic Program
									</label>
									<span asp-validation-for="Course" class="text-danger small"></span>
								</div>
							</div>
							
							<div class="col-md-6">
								<div class="form-floating mb-3">
									<input asp-for="DateCreated" type="date" class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
									<label asp-for="DateCreated" class="form-label">
										<i class="fas fa-calendar me-2"></i>Enrollment Date
									</label>
									<span asp-validation-for="DateCreated" class="text-danger small"></span>
								</div>
							</div>
							
							<!-- Student Preview Card -->
							<div class="col-12 mt-4">
								<div class="card bg-light border-0" id="studentPreview" style="display: none;">
									<div class="card-body">
										<h6 class="text-primary mb-3">
											<i class="fas fa-eye me-2"></i>Student Preview
										</h6>
										<div class="d-flex align-items-center">
											<div class="avatar bg-primary rounded-circle me-3 d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
												<span class="text-white fw-bold" id="previewInitials">--</span>
											</div>
											<div>
												<div class="fw-bold" id="previewName">Full Name</div>
												<div class="text-muted small" id="previewEmail">email@example.com</div>
												<div class="text-muted small" id="previewCourse">Program</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Form Actions -->
						<div class="row mt-5">
							<div class="col-12">
								<div class="d-flex justify-content-between align-items-center">
									<a asp-action="Index" class="btn btn-outline-secondary btn-lg rounded-pill px-4">
										<i class="fas fa-times me-2"></i>Cancel
									</a>
									<button type="submit" class="btn btn-primary btn-lg rounded-pill px-5">
										<i class="fas fa-save me-2"></i>Register Student
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
			</div>
			
			<!-- Help Section -->
			<div class="card mt-4 border-0 bg-light">
				<div class="card-body">
					<h6 class="text-primary mb-3">
						<i class="fas fa-info-circle me-2"></i>Registration Guidelines
					</h6>
					<div class="row">
						<div class="col-md-6">
							<ul class="list-unstyled mb-0">
								<li class="mb-2"><i class="fas fa-check text-success me-2"></i>All fields are required</li>
								<li class="mb-2"><i class="fas fa-check text-success me-2"></i>Use official email address</li>
							</ul>
						</div>
						<div class="col-md-6">
							<ul class="list-unstyled mb-0">
								<li class="mb-2"><i class="fas fa-check text-success me-2"></i>Select appropriate academic program</li>
								<li class="mb-2"><i class="fas fa-check text-success me-2"></i>Verify enrollment date</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	<script>
		// Real-time preview functionality
		function updatePreview() {
			const firstName = document.getElementById('Firstname').value || '';
			const lastName = document.getElementById('Lastname').value || '';
			const email = document.getElementById('Email').value || '';
			const course = document.getElementById('Course').value || '';
			
			const preview = document.getElementById('studentPreview');
			const initials = document.getElementById('previewInitials');
			const name = document.getElementById('previewName');
			const emailPreview = document.getElementById('previewEmail');
			const coursePreview = document.getElementById('previewCourse');
			
			if (firstName || lastName || email || course) {
				preview.style.display = 'block';
				initials.textContent = (firstName.charAt(0) + lastName.charAt(0)).toUpperCase() || '--';
				name.textContent = `${firstName} ${lastName}`.trim() || 'Full Name';
				emailPreview.textContent = email || 'email@example.com';
				coursePreview.textContent = course || 'Program';
			} else {
				preview.style.display = 'none';
			}
		}
		
		// Add event listeners for real-time preview
		document.addEventListener('DOMContentLoaded', function() {
			const inputs = ['Firstname', 'Lastname', 'Email', 'Course'];
			inputs.forEach(id => {
				const element = document.getElementById(id);
				if (element) {
					element.addEventListener('input', updatePreview);
					element.addEventListener('change', updatePreview);
				}
			});
		});
		
		// Form validation enhancement
		document.getElementById('studentForm').addEventListener('submit', function(e) {
			const requiredFields = ['Firstname', 'Lastname', 'Email', 'Course'];
			let isValid = true;
			
			requiredFields.forEach(field => {
				const input = document.getElementById(field);
				if (!input.value.trim()) {
					isValid = false;
					input.classList.add('is-invalid');
				} else {
					input.classList.remove('is-invalid');
				}
			});
			
			if (!isValid) {
				e.preventDefault();
				alert('Please fill in all required fields.');
			}
		});
		
		// Email validation
		document.getElementById('Email').addEventListener('blur', function() {
			const email = this.value;
			const atChar = String.fromCharCode(64);
			const dotChar = String.fromCharCode(46);
			const atPos = email.indexOf(atChar);
			const dotPos = email.indexOf(dotChar);
			const isValidEmail = atPos > 0 && dotPos > atPos && email.length > 5;
			
			if (email && !isValidEmail) {
				this.classList.add('is-invalid');
			} else {
				this.classList.remove('is-invalid');
			}
		});
	</script>
}