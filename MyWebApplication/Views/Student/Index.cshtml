@model IEnumerable<MyWebApplication.Models.Student>
@{
	ViewData["Title"] = "Student Management - Excellence Academy";
}

@section Styles {
	<link rel="stylesheet" href="~/css/Shared/management-page.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/Student/index.css" asp-append-version="true" />
}

<!-- Header Section - Mac Style -->
<section class="management-header">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-md-8 mb-3 mb-md-0">
				<h1 class="mb-2">
					<i class="fas fa-users me-3 header-icon"></i>Student Management
				</h1>
				<p class="lead mb-0">Manage student records and academic information</p>
			</div>
			<div class="col-md-4 text-md-end">
				<a asp-controller="Student" asp-action="Create" class="btn btn-primary-action">
					<i class="fas fa-user-plus me-2"></i>Add New Student
				</a>
			</div>
		</div>
	</div>
</section>

<!-- Main Content -->
<div class="container py-5">
	<!-- Statistics Cards - Mac Style -->
	<div class="row mb-5">
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card blue fade-in-up" style="animation-delay: 0.1s">
				<div class="stat-icon">
					<i class="fas fa-users"></i>
				</div>
				<h4 class="stat-number">@(Model?.Count() ?? 0)</h4>
				<p class="stat-label">Total Students</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card green fade-in-up" style="animation-delay: 0.2s">
				<div class="stat-icon">
					<i class="fas fa-graduation-cap"></i>
				</div>
				<h4 class="stat-number">@(Model?.Where(s => !string.IsNullOrEmpty(s.Course)).Count() ?? 0)</h4>
				<p class="stat-label">Enrolled</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card purple fade-in-up" style="animation-delay: 0.3s">
				<div class="stat-icon">
					<i class="fas fa-book"></i>
				</div>
				<h4 class="stat-number">@(Model?.Select(s => s.Course).Distinct().Count() ?? 0)</h4>
				<p class="stat-label">Programs</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card amber fade-in-up" style="animation-delay: 0.4s">
				<div class="stat-icon">
					<i class="fas fa-calendar"></i>
				</div>
				<h4 class="stat-number">@DateTime.Now.Year</h4>
				<p class="stat-label">Academic Year</p>
			</div>
		</div>
	</div>

	<!-- Search and Filter Section - Mac Style -->
	<div class="search-filter-card fade-in-up" style="animation-delay: 0.5s">
		<div class="row align-items-center g-3">
			<div class="col-md-6">
				<div class="input-group search-input-group">
					<span class="input-group-text"><i class="fas fa-search"></i></span>
					<input type="text" class="form-control" placeholder="Search students..." id="searchInput">
				</div>
			</div>
			<div class="col-md-3">
				<select class="form-select filter-select" id="courseFilter">
					<option value="">All Programs</option>
					@if (Model != null)
					{
						@foreach (var course in Model.Select(s => s.Course).Distinct().Where(c => !string.IsNullOrEmpty(c)))
						{
							<option value="@course">@course</option>
						}
					}
				</select>
			</div>
			<div class="col-md-3">
				<button class="btn btn-export w-100" onclick="exportToCSV()">
					<i class="fas fa-download me-2"></i>Export CSV
				</button>
			</div>
		</div>
	</div>

	<!-- Students Table - Mac Style -->
	<div class="table-card fade-in-up" style="animation-delay: 0.6s">
		<div class="table-card-header">
			<h5><i class="fas fa-table me-2"></i>Student Records</h5>
		</div>
		<div class="p-0">
			@if (Model != null && Model.Any())
			{
				<div class="table-responsive">
					<table class="table students-table mb-0" id="studentsTable">
						<thead>
							<tr>
								<th class="px-4 py-3">
									<i class="fas fa-hashtag me-2"></i>ID
								</th>
								<th class="px-4 py-3">
									<i class="fas fa-user me-2"></i>Full Name
								</th>
								<th class="px-4 py-3">
									<i class="fas fa-book me-2"></i>Program
								</th>
								<th class="px-4 py-3">
									<i class="fas fa-envelope me-2"></i>Email
								</th>
								<th class="px-4 py-3">
									<i class="fas fa-calendar me-2"></i>Enrolled
								</th>
								<th class="px-4 py-3 text-center">
									<i class="fas fa-cogs me-2"></i>Actions
								</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var student in Model)
							{
								<tr>
									<td class="px-4 py-3">
										<span class="badge-id">#@student.Id</span>
									</td>
									<td class="px-4 py-3">
										<div class="d-flex align-items-center">
											<div class="student-avatar me-3">
												<span>@(student.Firstname?.Substring(0, 1))@(student.Lastname?.Substring(0, 1))</span>
											</div>
											<div>
												<div class="student-name">@student.Firstname @student.Lastname</div>
											</div>
										</div>
									</td>
									<td class="px-4 py-3">
										@if (!string.IsNullOrEmpty(student.Course))
										{
											<span class="badge-course">@student.Course</span>
										}
										else
										{
											<span class="text-muted">Not assigned</span>
										}
									</td>
									<td class="px-4 py-3">
										<a href="mailto:@student.Email" class="text-decoration-none">
											<i class="fas fa-envelope me-1"></i>@student.Email
										</a>
									</td>
									<td class="px-4 py-3">
										<small class="text-muted">
											@student.DateCreated.ToString("MMM dd, yyyy")
										</small>
									</td>
									<td class="px-4 py-3 text-center">
										<div class="action-btn-group">
											<a asp-action="Details" asp-route-id="@student.Id" 
											   class="action-btn view" 
											   title="View Details">
												<i class="fas fa-eye"></i>
											</a>
											<a asp-action="Edit" asp-route-id="@student.Id" 
											   class="action-btn edit" 
											   title="Edit Student">
												<i class="fas fa-edit"></i>
											</a>
											<a asp-action="Delete" asp-route-id="@student.Id" 
											   class="action-btn delete" 
											   title="Delete Student">
												<i class="fas fa-trash"></i>
											</a>
										</div>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			}
			else
			{
				<div class="empty-state">
					<i class="fas fa-users fa-4x empty-state-icon"></i>
					<h4>No Students Found</h4>
					<p>Start by adding your first student to the system.</p>
					<a asp-controller="Student" asp-action="Create" class="btn btn-add-student">
						<i class="fas fa-user-plus me-2"></i>Add First Student
					</a>
				</div>
			}
		</div>
	</div>
</div>

@section Scripts {
	<script src="~/js/Student/index.js"></script>
}
