@model IEnumerable<MyWebApplication.Models.ActivityReservation>
@{
	ViewData["Title"] = "Activity Reservations - Excellence Academy";
}

@section Styles {
	<link rel="stylesheet" href="~/css/Shared/management-page.css" asp-append-version="true" />
}

<!-- Header Section - Mac Style -->
<section class="management-header">
	<div class="container">
		<div class="row align-items-center">
			<div class="col-md-8 mb-3 mb-md-0">
				<h1 class="mb-2">
					<i class="fas fa-calendar-alt me-3 header-icon"></i>Activity Reservations
				</h1>
				<p class="lead mb-0">Manage activity area reservation applications and approvals</p>
			</div>
			<div class="col-md-4 text-md-end">
				<a asp-controller="ActivityReservation" asp-action="Create" class="btn btn-primary-action">
					<i class="fas fa-plus me-2"></i>New Reservation
				</a>
			</div>
		</div>
	</div>
</section>

<!-- Main Content -->
<div class="container py-5">
	<!-- Statistics Cards - Mac Style -->
	<div class="row mb-5">
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card purple fade-in-up" style="animation-delay: 0.1s">
				<div class="stat-icon"><i class="fas fa-file-alt"></i></div>
				<h4 class="stat-number">@(Model?.Count() ?? 0)</h4>
				<p class="stat-label">Total Reservations</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card amber fade-in-up" style="animation-delay: 0.2s">
				<div class="stat-icon"><i class="fas fa-clock"></i></div>
				<h4 class="stat-number">@(Model?.Where(r => r.Status == "Pending").Count() ?? 0)</h4>
				<p class="stat-label">Pending</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card green fade-in-up" style="animation-delay: 0.3s">
				<div class="stat-icon"><i class="fas fa-check-circle"></i></div>
				<h4 class="stat-number">@(Model?.Where(r => r.Status == "Approved").Count() ?? 0)</h4>
				<p class="stat-label">Approved</p>
			</div>
		</div>
		<div class="col-md-3 col-6 mb-3 mb-md-0">
			<div class="stat-card red fade-in-up" style="animation-delay: 0.4s">
				<div class="stat-icon"><i class="fas fa-times-circle"></i></div>
				<h4 class="stat-number">@(Model?.Where(r => r.Status == "Rejected").Count() ?? 0)</h4>
				<p class="stat-label">Rejected</p>
			</div>
		</div>
	</div>

	<!-- Search and Filter Section - Mac Style -->
	<div class="search-filter-card fade-in-up" style="animation-delay: 0.5s">
		<div class="row align-items-center g-3">
			<div class="col-md-6">
				<div class="input-group search-input-group">
					<span class="input-group-text"><i class="fas fa-search"></i></span>
					<input type="text" class="form-control" placeholder="Search reservations..." id="searchInput">
				</div>
			</div>
			<div class="col-md-3">
				<select class="form-select filter-select" id="statusFilter">
					<option value="">All Status</option>
					<option value="Pending">Pending</option>
					<option value="Approved">Approved</option>
					<option value="Rejected">Rejected</option>
				</select>
			</div>
			<div class="col-md-3">
				<button class="btn btn-export w-100" onclick="exportToCSV()">
					<i class="fas fa-download me-2"></i>Export
				</button>
			</div>
		</div>
	</div>

	<!-- Activity Reservations Table - Mac Style -->
	<div class="table-card fade-in-up" style="animation-delay: 0.6s">
		<div class="table-card-header">
			<h5><i class="fas fa-table me-2"></i>Activity Reservations</h5>
		</div>
		<div class="p-0">
			@if (Model != null && Model.Any())
			{
				<div class="table-responsive">
					<table class="table management-table mb-0">
						<thead>
							<tr>
								<th class="px-4 py-3">ID</th>
								<th class="px-4 py-3">Organization</th>
								<th class="px-4 py-3">Activity Title</th>
								<th class="px-4 py-3">Venue</th>
								<th class="px-4 py-3">Date Needed</th>
								<th class="px-4 py-3">Status</th>
								<th class="px-4 py-3 text-center">Actions</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var reservation in Model)
							{
								<tr>
									<td class="px-4 py-3"><span class="badge-id">#@reservation.Id</span></td>
									<td class="px-4 py-3">@reservation.OrganizationName</td>
									<td class="px-4 py-3">@reservation.ActivityTitle</td>
									<td class="px-4 py-3">@reservation.Venue</td>
									<td class="px-4 py-3">@reservation.DateNeeded.ToString("MMM dd, yyyy")</td>
									<td class="px-4 py-3">
										@if (reservation.Status == "Pending")
										{
											<span class="badge-status pending">Pending</span>
										}
										else if (reservation.Status == "Approved")
										{
											<span class="badge-status approved">Approved</span>
										}
										else if (reservation.Status == "Rejected")
										{
											<span class="badge-status rejected">Rejected</span>
										}
									</td>
									<td class="px-4 py-3 text-center">
										<div class="action-btn-group">
											<a asp-action="Details" asp-route-id="@reservation.Id" class="action-btn view" title="View Details">
												<i class="fas fa-eye"></i>
											</a>
											@if (reservation.Status == "Pending")
											{
												<a asp-action="Edit" asp-route-id="@reservation.Id" class="action-btn edit" title="Edit Reservation">
													<i class="fas fa-edit"></i>
												</a>
												<a asp-action="Delete" asp-route-id="@reservation.Id" class="action-btn delete" title="Delete Reservation">
													<i class="fas fa-trash"></i>
												</a>
											}
										</div>
									</td>
								</tr>
							}
						</tbody>
					</table>
				</div>
			}
			else
			{
				<div class="empty-state">
					<i class="fas fa-calendar-alt fa-4x empty-state-icon"></i>
					<h4>No Activity Reservations Found</h4>
					<p>Start by creating your first activity reservation.</p>
					<a asp-controller="ActivityReservation" asp-action="Create" class="btn btn-primary-action">
						<i class="fas fa-plus me-2"></i>Create First Reservation
					</a>
				</div>
			}
		</div>
	</div>
</div>

@section Scripts {
	<script src="~/js/ActivityReservation/index.js"></script>
}